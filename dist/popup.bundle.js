console.log("Popup UI script loaded."),document.addEventListener("DOMContentLoaded",(function(){chrome.runtime.sendMessage({action:"requestAnalysisResults"},(function(e){if(console.log("Received analysis results from background script."),chrome.runtime.lastError)return console.error("Error receiving analysis results:",chrome.runtime.lastError.message),void(document.getElementById("gradeResults").innerHTML="<p>Error loading analysis results.</p>");e.error?(console.error("Error receiving analysis results:",e.error),document.getElementById("gradeResults").innerHTML="<p>Error loading analysis results.</p>"):e.clarityGrade&&e.contentGrade?function(e,r,n,t){console.log("Updating UI with analysis results.");try{document.getElementById("clarityGrade").innerHTML="<h3>Clarity Grade:</h3><p>".concat(e,"</p>"),document.getElementById("contentGrade").innerHTML="<h3>Content Grade:</h3><p>".concat(r,"</p>"),document.getElementById("keyExcerpts").innerHTML="<h3>Key Excerpts:</h3><p>".concat(n,"</p>"),document.getElementById("reasons").innerHTML="<h3>Reasons for Grade:</h3><p>".concat(t,"</p>")}catch(e){console.error("Error updating UI:",e.message,e.stack),document.getElementById("gradeResults").innerHTML="<p>Error updating UI. Please check the console for more details.</p>"}}(e.clarityGrade,e.contentGrade,e.keyExcerpts,e.reasons):(console.log("Incomplete analysis results received."),document.getElementById("gradeResults").innerHTML="<p>Incomplete analysis results received. Please try again.</p>")}))}));